#!/usr/bin/env node
const { version } = require('../package.json');
const program = require('commander');
const dev = require('../lib/cli/dev');
const build = require('../lib/cli/build');

const cwd = process.cwd();

program.version(version);

program
  .option('-c, --clean', 'delete cache folder')

program
  .command('dev [media]')
  .description('编译文件, 默认配置: ale.config.js')
  .option('-f, --file <filename>', 'specify the file path of `ale.config.js`')
  .option('-p, --print', 'print info')
  .action(dev)

program
  .command('build [media]')
  .description('编译文件, 默认配置: ale.config.js')
  .option('-f, --file <filename>', 'specify the file path of `ale.config.js`')
  .action(build);

program
  .command('init [name]')
  .description('生成预配置文件: ale.config.js')
  .action((name, options)=>{
    // name = name ? `ale.config.${name}.js` : 'ale.config.js';
    // let configFile = path.join(cwd, name);
    //
    // if(_.exists(configFile)){
    //   fis.log.warn(`${name} is existed.`)
    //   return null;
    // }

    // let data = _.read(path.join(__dirname, '../config.example.js'));
    //
    // _.write(configFile, data, 'utf8');
  });

program
  .command('install [repo]')
  .alias('i')
  .description('install')
  .action((repo, options)=>{
    console.log(2, repo);
  });


program.parse(process.argv);
